import{_ as b,ay as V,az as c,H as d,I as p,O as f,o as g,b as y,d as s,w as u,k as v,l as w,J as m,f as a,Q as o,h as U,j as x}from"./main-3e49f720.js";import{b as C,e as j,t as B,v as k}from"./filtersData-36fe0b62.js";function _(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,n=>(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16))}const I={name:"create-brand-view",data(){return{bodys:C,engines:j,transmissions:B,volumes:k,brands:[],car:{brand:null,body:null,engine:null,generation:null,image:null,model:null,transmission:null,volume:null,price:null}}},mounted(){this.loadBrands()},computed:{brandNames(){return this.brands.map(n=>n.name)}},methods:{isFormValid(){let n=!0;return Object.keys(this.car).forEach(t=>{this.car[t]===null&&(n=!1)}),n},async createCar(){if(!this.isFormValid())return;const n=this.getBrandId(this.car.brand);await V(d(m,"cars","models"),{[n]:c({id:_(),...this.car})}),await p("createCar")},getBrandId(n){return this.brands.find(t=>t.name===n).id},async loadBrands(){const n=await f(d(m,"cars","brands"));n.exists()&&(this.brands=n.data().brands)}}},M={class:"wrap"};function S(n,l,t,h,e,i){return g(),y("div",M,[s(w,{onSubmit:v(i.createCar,["prevent"])},{default:u(()=>[s(a,{modelValue:e.car.brand,"onUpdate:modelValue":l[0]||(l[0]=r=>e.car.brand=r),items:i.brandNames,label:"Бренд","persistent-hint":"","return-object":""},null,8,["modelValue","items"]),s(a,{modelValue:e.car.body,"onUpdate:modelValue":l[1]||(l[1]=r=>e.car.body=r),items:e.bodys,label:"Корпус","persistent-hint":"","return-object":""},null,8,["modelValue","items"]),s(a,{modelValue:e.car.engine,"onUpdate:modelValue":l[2]||(l[2]=r=>e.car.engine=r),items:e.engines,label:"Двигатель","persistent-hint":"","return-object":""},null,8,["modelValue","items"]),s(o,{modelValue:e.car.generation,"onUpdate:modelValue":l[3]||(l[3]=r=>e.car.generation=r),modelModifiers:{number:!0},counter:4,label:"Год выпуска"},null,8,["modelValue"]),s(o,{modelValue:e.car.image,"onUpdate:modelValue":l[4]||(l[4]=r=>e.car.image=r),modelModifiers:{trim:!0},label:"Ссылка на изображение"},null,8,["modelValue"]),s(o,{modelValue:e.car.model,"onUpdate:modelValue":l[5]||(l[5]=r=>e.car.model=r),modelModifiers:{trim:!0},label:"Название"},null,8,["modelValue"]),s(a,{modelValue:e.car.transmission,"onUpdate:modelValue":l[6]||(l[6]=r=>e.car.transmission=r),items:e.transmissions,label:"Трансмиссия","persistent-hint":"","return-object":""},null,8,["modelValue","items"]),s(a,{modelValue:e.car.volume,"onUpdate:modelValue":l[7]||(l[7]=r=>e.car.volume=r),items:e.volumes,label:"Объем двигателя","persistent-hint":"","return-object":""},null,8,["modelValue","items"]),s(o,{modelValue:e.car.price,"onUpdate:modelValue":l[8]||(l[8]=r=>e.car.price=r),modelModifiers:{number:!0},label:"Цена"},null,8,["modelValue"]),s(U,{type:"submit"},{default:u(()=>[x("Добавить")]),_:1})]),_:1},8,["onSubmit"])])}const A=b(I,[["render",S],["__scopeId","data-v-d2ab80ea"]]);export{A as default};
